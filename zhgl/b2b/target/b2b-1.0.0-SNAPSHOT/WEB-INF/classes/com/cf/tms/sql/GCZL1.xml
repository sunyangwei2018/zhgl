<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="GCZL" >
 	
 	
 	<select id="selectGCZL_sqlserver_sum" parameterType="map" resultType="map">
 		select count(1)"count" from(select distinct(工程编号),工程名称,网点编号,网点名称,联系人,移动电话,to_char(安装日期,'yyyy-MM-dd') 安装日期,邮政编码,用户地址,
 		区号,电话号码,to_char(购买日期,'yyyy-MM-dd'),销售单位号,商店简称,销售类型,销售区域代码,内销售区域代码,年份
 		from tbsqlinst) 
		where 1=1
		<if test="q != '' and q != null"> AND (工程编号 like '%'||#{q}||'%' OR 工程名称 like '%'||#{q}||'%')</if>
 	</select>
 	<select id="selectGCZL_sqlserver" parameterType="map" resultType="map">
 		select * from(select distinct(工程编号),工程名称,网点编号,网点名称,联系人,移动电话,to_char(安装日期,'yyyy-MM-dd') 安装日期,邮政编码,用户地址,
 		区号,电话号码,to_char(购买日期,'yyyy-MM-dd'),销售单位号,商店简称,销售类型,销售区域代码,内销售区域代码,年份
 		from tbsqlinst) 
		where 1=1
		<if test="q != '' and q != null"> AND (工程编号 like '%'||#{q}||'%' OR 工程名称 like '%'||#{q}||'%')</if>
 	</select>
 	
 	
 	<select id="selectGCZLITEM" parameterType="map" resultType="map">
 		select 外机条码 SPWJ_TM,机型 SPWJ_ID,机型描述 SPWJ_NAME,内机条码 SPNJ_TM,内机型 SPNJ_ID,内机型描述 SPNJ_NAME  from tbsqlinst where 工程编号=#{gcbh}
 	</select>
 	
 	<select id="selectGCZLITMEGROUPJX" parameterType="map" resultType="map">
 		select  机型 SPWJ_ID,机型描述 SPWJ_NAME,内机型 SPNJ_ID,内机型描述 SPNJ_NAME,count(机型)numbers from tbsqlinst where 工程编号=#{gcbh} group by  机型,机型描述,内机型,内机型描述
 	</select>

 	<select id="selectGCZL" parameterType="map" resultType="map">
 		 select gczlid,gsid,khgsid,gc_id,gc_name,customer_name,customer_lxr,customer_tel,customer_postcode from gczl where gczlid=#{GCZLID}
 	</select>
</mapper>
