<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="CFCYS" >
	<!--查询服务套餐列表  -->
	<select id="selectCYS" parameterType="map" resultType="map">
		select shp_code AS "shp_code",shp_name AS "shp_name",addr AS "addr",lxr AS "lxr",tel AS "tel",sfjs "sfjs",
		case when sfjs=1 then '是' else '否' end "sfjsname",
     	sd "sd",fptt "fptt",yhht "yhht",yhzh "yhzh",khh "khh",khhdz "khhdz",
    	sd "sd_cn",fptt "fptt_cn",yhht "yhht_cn",yhzh "yhzh_cn",khh "khh_cn",khhdz "khhdz_cn"
		from shipper_tab
		where 1 = 1
		<if test="shp_code != '' and shp_code != null">AND shp_code LIKE '%'||#{shp_code}||'%'</if>
		<if test="shp_name != '' and shp_name != null">AND shp_name LIKE '%'||#{shp_name}||'%'</if>
 	</select>
 	<select id="selectBH" parameterType="map" resultType="map">
 		select max(shp_code)+1 AS "shpbh" from shipper_tab
 	</select>
 	<select id="selectCYSITEM" parameterType="map" resultType="map">
 		select a.shp_code AS "shp_code",a.fhwd AS "fhwd",a.ddwd AS "ddwd",a.bzsx AS "bzsx",
		(select b.net_name from net_tab b where b.net_code = a.fhwd)  AS "fhwd_cn",
		(select c.net_name from net_tab c where c.net_code = a.ddwd)  AS "ddwd_cn"
		from shipperitem_tab a
		where 1=1
		<if test="shp_code != '' and shp_code != null">AND shp_code = #{shp_code}</if>
 	</select>
 	<select id="selectWD" parameterType="map" resultType="map">
 		select net_code AS "net_code",net_name AS "net_name",s_code  AS "_parentId"
		from net_tab
		where sjwd=0 and dqzt=0
 	</select>
</mapper>